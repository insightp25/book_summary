# 9. 테스트 범위와 종류

# 테스트 범위

테스트의 범위는 테스트의 목적과 수행하는 사람에 따라 달라진다.

- eg. 단위 테스트, 통합 테스트, 기능 테스트...

> 테스트 관련 용어는 문맥이나 사용자에 따라 의미가 다를 때도 있다. 예를 들어 개발 완료 후에 진행하는 최종 테스트를 '통합 테스트'라고 부르기도 한다. 고객의 입장에서 요구한 기능을 올바르게 구현했는지 수행하는 테스트를 '인수 테스트'라고 부르는데 요건을 완료했는지 정의하기 위해 작성한 테스트를 '인수 테스트'로 부르기도 한다.








<br><br>

## 기능 테스트와 E2E 테스트

기능 테스트(Functional Testing)는 사용자 입장에서 시스템이 제공하는 기능이 올바르게 동작하는지 확인한다. 이는 끝(브라우저)에서 끝(데이터베이스)까지 모든 구성 요소를 검사하기 때문에 E2E(end to end) 테스트로도 볼 수 있다.

QA 조직에서 주로 수행하게 되며, 부득이한 경우를 제외하고 사용자와 동일한 방식으로 기능을 검증해야 한다.







<br><br>

## 통합 테스트

통합 테스트(Integration Testing)는 시스템의 각 구성 요소가 올바르게 연동되는지 확인한다. 기능 테스트가 사용자 입장에서 테스트하는 데 반해 통합 테스트는 소프트웨어의 코드를 직접 테스트 한다.

일반적인 웹 애플리케이션은 프레임워크, 라이브러리, 데이터베이스, 구현한 코드가 주요 통합 테스트 대상이다.

- eg. 회원 가입 코드에 대한 통합 테스트를 수행하면 스프링 프레임워크나 MyBatis 설정이 올바른지, SQL 쿼리가 맞는지, DB 트랜잭션이 잘 동작하는지 등을 검증할 수 있다.








<br><br>

## 단위 테스트

단위 테스트(Unit Testing)는 개별 코드나 컴포넌트가 기대한대로 동작하는지 확인한다. 한 클래스, 한 메서드 같은 작은 범위를 테스트하며, 일부 의존 대상은 스텁이나 모의 객체 등을 이용해 대역으로 대체한다.








<br><br>

## 테스트 범위 간 차이

각 테스트는 다음과 같은 차이가 있다.

- 기능 테스트
  - 웹 서버 구동, 모바일 앱 등 설치 필요
  - 추가로 브라우저나 앱을 구동하고 화면의 흐름에 따라 알맞은 상호작용이 필요하다.
- 통합 테스트
  - DB, 캐시 서버 등 연동 대상을 구성해야 한다.
  - DB 연결, 소켓 통신, 스프링 컨테이너 초기화와 같이 테스트 실행 속도를 느리게 만드는 요인이 많다.
- 단위 테스트
  - 테스트 코드를 빼면 따로 준비할 것이 없다
  - 서버 구동이나 DB 준비가 없고 의존 기능을 대역으로 처리하므로 실행 속도가 빠르다.
- 통합 테스트나 기능 테스트로는 외부 시스템과의 연동 등으로 상황을 준비하거나 결과 확인이 어렵거나 불가능할 때가 있다. 이런 경우 단위 테스트와 대역을 조합해 상황을 만들고 결과를 확인해야 한다.

TDD 여부와 상관없이 개발자는 단위 테스트와 통합 테스트를 섞어 작성한다. 절대적인 규칙은 없지만 위와 같은 차이로 단위 테스트 코드를 더 많이 작성한다.

다만 통합 테스트는 필요하다. 각 구성 요소가 올바르게 연동되는 것을 확인해야 하는데, 통합 테스트 코드는 이를 자동화하기 좋은 수단이다.








<br><br>

## 테스트 범위에 따른 테스트 코드 개수와 시간

테스트 전 범위 자동화 시도가 증가하고 있다. 기능 테스트는 브라우저 등 클라이언트부터 DB까지 모든 환경이 갖춰져야 하므로 다양한 상황별로 테스트하기 가장 어렵다.

통합 테스트는 기능 테스트에 비해 상대적으로 실행 시간이 짧고 보다 유연한 상황 구성이 가능하다.

단위 테스트는 통합 테스트로도 만들기 힘든 다양한 상황을 쉽게 구성할 수 있다.

가능하면 속도가 빠르고 피드백 또한 빠르게 받을 수 있는 단위 테스트에서 다양한 상황을 다루고, 통합 테스트나 기능 테스트는 주요 상황에 초점을 맞춰야 한다.









<br><br>

##





<br><br>

##






<br><br>

##



